<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from drone4.urdf                    | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<!-- This URDF was automatically created by SolidWorks to URDF Exporter! Originally created by Stephen Brawner (brawner@gmail.com) 
    Commit Version: 1.6.0-4-g7f85cfe  Build Version: 1.6.7995.38578
    For more information, please see http://wiki.ros.org/sw_urdf_exporter -->
<robot name="moss_bot">
  <material name="black">
    <color rgba="0.0 0.0 0.0 1.0"/>
  </material>
  <material name="blue">
    <color rgba="0.0 0.0 1.0 1.0"/>
  </material>
  <material name="green">
    <color rgba="0.0 0.8 0.0 1.0"/>
  </material>
  <material name="grey">
    <color rgba="0.2 0.2 0.2 1.0"/>
  </material>
  <material name="orange">
    <color rgba="1.0 0.423529411765 0.0392156862745 1.0"/>
  </material>
  <material name="brown">
    <color rgba="0.870588235294 0.811764705882 0.764705882353 1.0"/>
  </material>
  <material name="red">
    <color rgba="0.80078125 0.12890625 0.1328125 1.0"/>
  </material>
  <material name="white">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material>

  <!-- ROS2 Control Plugin -->
  <gazebo>
    <plugin filename="libgazebo_ros_control.so" name="gazebo_ros_control">
      <robotNamespace>/moss_bot</robotNamespace>
      <robotParam>/robot_description</robotParam>
      <robotSimType>gazebo_ros_control/DefaultRobotHWSim</robotSimType>
    </plugin>
  </gazebo>

  <!-- Diff Drive Plugin -->
  <gazebo>
    <plugin filename="libgazebo_ros_diff_drive.so" name="differential_drive_controller">
      <ros>
        <!-- <namespace>/box_bot</namespace> -->
      </ros>

      <!-- wheels -->
      <left_joint>right_wheel_joint</left_joint>
      <right_joint>left_wheel_joint</right_joint>

      <!-- kinematics -->
      <wheel_separation>0.198</wheel_separation>
      <wheel_diameter>0.09</wheel_diameter>

      <!-- limits -->
      <max_wheel_torque>0.1</max_wheel_torque>
      <max_wheel_acceleration>1.0</max_wheel_acceleration>

      <!-- output -->
      <publish_odom>true</publish_odom>
      <publish_odom_tf>true</publish_odom_tf>

      <odometry_frame>odom</odometry_frame>
      <robot_base_frame>chassis</robot_base_frame>
    </plugin>

    <plugin filename="libgazebo_ros_joint_state_publisher.so" name="moss_bot_joint_state">
      <ros>
        <remapping>~/out:=joint_states</remapping>
      </ros>
      <update_rate>30</update_rate>
      <joint_name>right_wheel_joint</joint_name>
      <joint_name>left_wheel_joint</joint_name>
    </plugin>
  </gazebo>

  <!-- IMU Plugin -->
  <gazebo reference="base_link">
    <sensor name="moss_bot_imu" type="imu">
      <always_on>true</always_on>
      <update_rate>30</update_rate>
      <plugin filename="libgazebo_ros_imu_sensor.so" name="box_bot_imu_plugin" >
        <ros>
          <remapping>~/out:=data</remapping>
        </ros>
      </plugin>
    </sensor>
  </gazebo>

  <!-- Camera-->
  <link name='rgb_cam_camera_link'>
		<visual>
			<geometry>
				<box size="0.01 0.01 0.01"/>
			</geometry>
      <material name="red"/>
		</visual>
	</link>

  <gazebo reference='rgb_cam_camera_link'>
    <material>Gazebo/Red</material>
  </gazebo>

  <joint name="rgb_cam_camera_link_joint" type="fixed">
		<origin rpy="0 0 0" xyz="0.05 0 0.05"/>
		<parent link="chassis"/>
		<child link="rgb_cam_camera_link"/>
	</joint>

  <link name="rgb_cam_camera_link_frame">
  </link>

  <joint name="rgb_cam_camera_frame_joint" type="fixed">
      <origin xyz="0 0 0" rpy="0 0 0" />
      <parent link="rgb_cam_camera_link" />
      <child link="rgb_cam_camera_link_frame" />
  </joint>

  <gazebo reference="rgb_cam_camera_link_frame">
    <sensor type="camera" name="rgb_cam">
      <alwaysOn>true</alwaysOn>
      <visualize>true</visualize>
      <update_rate>10.0</update_rate>
      <camera name="rgb_cam_SP">
        <pose>0 0 0 0 0 0</pose>
        <horizontal_fov>1.3962634</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.005</near>
          <far>20.0</far>
        </clip>
      </camera>

      <plugin filename="intel_realsense_r200_rgb_driver" name="camera_controller">
        <cameraName>intel_realsense_r200_rgb</cameraName>
        <imageTopicName>image_raw</imageTopicName>
          <cameraInfoTopicName>camera_info</cameraInfoTopicName>
          <frameName>realsense_rgb_frame</frameName>
        <hackBaseline>0.07</hackBaseline>
        <distortionK1>0.0</distortionK1>
        <distortionK2>0.0</distortionK2>
        <distortionK3>0.0</distortionK3>
        <distortionT1>0.0</distortionT1>
        <distortionT2>0.0</distortionT2>
      </plugin>
    </sensor>
  </gazebo>

  <link name="base_link">
  </link>

  <link name="chassis">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.00103749030591196 0.0194066336453528 -0.142976007690673"/>
      <mass value="1.5696761954861"/>
      <inertia ixx="0.00770869554824896" ixy="6.32715003435383E-06" ixz="-9.78018093419617E-05" iyy="0.0152795405278708" iyz="-5.60185465803943E-05" izz="0.00807559595588393"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:////home/razeragon/moss_project/install/moss_description/share/moss_description/meshes/base_link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:////home/razeragon/moss_project/install/moss_description/share/moss_description/meshes/base_link.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="base_link_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="base_link"/>
    <child link="chassis"/>
  </joint>

  <link name="left_wheel">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.0167008021462844 -6.14550641332701E-05 0.000790217368505477"/>
      <mass value="0.039416993023242"/>
      <inertia ixx="4.65665430589552E-05" ixy="1.39028084407786E-10" ixz="-1.07377430067167E-10" iyy="2.36178454866054E-05" iyz="-2.45793300882201E-12" izz="2.36178443396775E-05"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:////home/razeragon/moss_project/install/moss_description/share/moss_description/meshes/left_wheel.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:////home/razeragon/moss_project/install/moss_description/share/moss_description/meshes/left_wheel.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="left_wheel_joint" type="continuous">
    <origin rpy="0.25279 0 0" xyz="-0.084 0.060004 0.029996"/>
    <parent link="chassis"/>
    <child link="left_wheel"/>
    <axis xyz="1 0 0"/>
  </joint>

  <link name="right_wheel">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0167008020435532 -2.99490744704034E-08 -1.64070603013433E-07"/>
      <mass value="0.0394169932557089"/>
      <inertia ixx="4.65665430607275E-05" ixy="-3.21699920762843E-11" ixz="-1.72696361853544E-10" iyy="2.36178425346664E-05" iyz="8.46460880870787E-13" izz="2.36178472904368E-05"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:////home/razeragon/moss_project/install/moss_description/share/moss_description/meshes/right_wheel.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:////home/razeragon/moss_project/install/moss_description/share/moss_description/meshes/right_wheel.STL"/>
      </geometry>
    </collision>
  </link>
  
  <joint name="right_wheel_joint" type="continuous">
    <origin rpy="1.5708 0 0" xyz="0.084 0.059996 0.029996"/>
    <parent link="chassis"/>
    <child link="right_wheel"/>
    <axis xyz="1 0 0"/>
  </joint>
</robot>
